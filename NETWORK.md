# 네트워킹과 보안지식

네트워킹과 보안지식에서는 나스를 활용하는데 꼭 필요하다고 생각되는 지식정도만 다루게 됩니다.  
물론 그 내용은 매우 방대하므로 참고하기 좋은 몇몇 URL들로 대부분 채워집니다.  
기본적으로 완벽하진 않지만 대략 알아둬야할 단어와 개념은 아래 목록과 같습니다.

- DHCP
- IP Address (IP주소)
- MAC Address(맥 어드레스)
- 내부망 & 외부망
- 게이트 웨이
- Port (구체적으로 포트 포워딩 Port forwarding)


````
해당 내용을 *매우 짧게 요약하여 설명하고 파악합니다.  
무조건 암기해고 공부할 필요는 없지만.. 어떤 의미인지를  대략적으론 알아야  
나스를 더 잘 활용 할 수 있으며 문제가 사용 중 발생했을 때 스스로 해결할 수 있게 됩니다. 
````

## 클라이언트
- 공유기에 붙어 있는 기기들을 클라이언트라 칭합니다. 

## 서버 
- 이 문서에서는 우리의 나스를 서버로 칭합니다. (사실은 공유기 입장에선 클라이언트이지만요.)

## DHCP
- **공유기 세팅화면**을 보면 **DHCP 서버**라는 단어를 보실 수 있습니다.
- 거의 모든 **공유기**는 **허브 + DHCP**로 이루어져 있습니다.
    - **허브**는 우리가 생각하는 *인터넷 라인*을 **여러갈래로 나눠주는 기능**을 말합니다. (보통 공유기가 유선1라인를 유선4라인으로 나눠주죠. 요즘은 무선 와이파이까지..)
- **DHCP**는 이렇게 유선 하나를 여러 라인으로 나눠주고 *아이피를 할당해*  **네트워크를 구축해주는 것**을 말합니다. (물론 무선도 해당 됩니다.)
- 가령 공유기 게이트웨이(관리자 혹은 세팅주소)인 192.168.1.1은 192.168.1대역에서 1번은 게이트 웨이를 뜻하며..
- 맨뒤자리 2~255번은 그 네트워크에 속한 클라이언트(사용자)들을 뜻합니다. (ex: 192.168.1.2 ~ 192.168.1.255)
- 보통 공유기의 DHCP란에서는 이 사용자들(클라이언트)들의 아이피 할당 방법에 관련된 것이 대부분입니다.
    - static 혹은 dynamic하게 아이피를 부여할지, 아니면 맥어드레스에 따라 고정아이피를 부여할지 등등이죠..
# 아이피 주소(IP Address)
- 네트워크상에서 컴퓨터를 찾는 방법입니다. 
- DHCP를 설명하다보니 IP에 대해 설명하게 되네요. IP는 네트워크 상에서 일종의 주소지라고 비유 할 수 있겠습니다.
  - 하단에 나오겠지만.. 내부 외부망 모두 해당 됩니다.
- 형식은 최대 1~255까지의 수 4묶음으로 이어져 있습니다. (8.8.8.8, 192.168.100.255 등등)
# 맥 어드레스(MAC Address)
- 클라이언트를 식별해주는 물리주소 값을 말합니다. 4바이트 크기로 이루어져 있습니다.
- 일정한 패턴을 가지지만 고유 식별 값입니다. 00~FF까지 두자리수 묶음 6개로 이루어져 있습니다
  - ex) 00-11-22-A8-F1-BA, FF-F1-A0-AB-DB-C4 등등
# 내부망(inner line)
- DHCP란 에서 잠깐 등장했지만.. 공유기를 기준으로 연결된 네트워크를 **내부망**이라고 칭합니다.
- 이 내부망은 무선과 유선을 가리지 않습니다. 즉 랜선으로 꼽힌 PC와 WiFi로 연결된 노트북도 내부망에 묶인것입니다.
- 내부망 주소는 IP주소 형식에 따라 자유롭게 변경이 가능합니다만..
  - 보통은 라우터(공유기) 제조사들이 일정한 패턴을 기본값으로 정해둬서 정형화 되어있습니다.
    - ex) 192.168.0.1, 192.168.1.1, 172.30.1.254
- 내부망에서 가지는 IP를 내부 아이피라고도 부릅니다. 
  - 만약 내 공유기에 서버가 192.168.1.10 의 아이피로 할당되어 있을 경우..
  - 같은 공유기상에서 사용자는 192.168.1.10으로 내 서버에 접근 할 수 있습니다.
# 외부망(outer line)
- 흔히 우리가 알고 있는 인터넷입니다.
- 쉽게 공유기를 기준으로 **바깥쪽** 망을 외부망이라 칭합니다.
- 주로 <http://ipipip.kr> 과 같은 사이트에서 확인 할 수 있습니다.

# 게이트 웨이(Gateway)
- 자주 보실 내용은 아니지만.. 쉽게 이해하자면.. **서로 다른 네트워크로 통하는 첫번째 관문** 정도로 이해하면 간단 할 것 같습니다.
- A가정과 B 가정은 서로 다른 게이트 웨이로 이루어져 있고.. A가정에서 B가정으로 연결할 때 서로의 게이트 웨이를 통하게 됩니다.
- 이 저장소에서 이를 언급한 이유는 *사용자의 게이트 웨이 주소가*  **주로 공유기의 관리자 페이지 주소** 이기 때문입니다.
    - 그 이유는 ISP(통신사) 모뎀에서 공유기를 거쳐 네트워크를 구성하기 때문입니다. 
# 포트 Port (Port forwarding 포트포워딩)
- IP주소가 컴퓨터를 찾는 방법이라면..
- 포트는 컴퓨터안에서 프로그램을 찾는 방법입니다.
- 서버(나스)는 파일 서버 이외에 프로그램들을 설치하고 활용 할 수 있습니다. 
- 하지만 아이피만으로 각각 다른 프로그램을 호출할 방법이 없게 되므로.. 포트를 이용해 프로그램 구분을 합니다.
    - 가령 ftp는 21번 포트를 webdav는 5005 포트를 갖습니다. 또 서버가 192.168.1.10 아이피라고 가정합니다.
    - ftp를 호출 한다면 **http://192.168.1.10:21**
    - webdav를 호출한다면 **http://192.168.1.10:5005**
- 포트는 0~65535를 사용하며 0~1023번까지는 예약된 포트로 사용되고 있습니다.

### 포트 포워딩

- 그렇다면 **포트포워딩**은 무엇 이길래.. 포트를 알아야하고 우리를 괴롭혔던 걸까요?
- 포트 포워딩은 공유기가 받은 포트를 어떻게 전달해줄지 정하는 규칙을 말합니다.
- 이렇게 적으니 이해가 어려워서 예를 들어보겠습니다.
    - 예시로 스타크래프트는 6112, 디아블로1은 6119 포트를 사용한다고 합니다.
    - 우리가 설치한 공유기 인터넷으로 스타크래프트를 제대로 즐기려면.. 6112 포트를 현재 PC에 포트포워딩 해야합니다.
    - 현재 PC는 192.168.1.8 입니다.
    - 만약 이런 포트 포워딩 과정을 제대로 하지 않고.. 스타크래프트에서 방을 만들면 아무도 들어오지 못하게 되죠. 
    - 우리는 스타크래프트를 즐기기 위해서 공유기에 6112포트가 통신할때 192.168.1.8의 6112 포트로 전달되게 설정을 해주면 됩니다.
        - 설정 방법은 공유기마다 조금씩 다르지만 왼쪽의 포트가 공유기 기준. 오른쪽이 포워딩될 목적지 입니다.
- 이렇게 공유기를 사용하게 되면.. 우리가 필요로 하는(사용할 포트)를 공유기 내부의 클라이언트(PC)로 포워딩을 해줘야 사용할 수 있다는 것을 의미합니다.
- 이는 우리가 시놀로지에 새로운 기능을 추가하거나 서버를 추가 할 때.. 이를 공유기에 포트 포워딩 해주지 않으면 외부와 제대로 통신 할 수 없게 됩니다.   
    - 이러한 번거로움을 UPnP라는 기능으로 조금은 편리하게 환경을 구축할 수 있습니다.



###DMZ

- DMZ는 하나의 아이피주소를 지정하게 되어 있고.. 이를 지정하게 되면 공유기에 요청되는 모든 포트를 지정한 IP로 넘깁니다.
- 굉장히 편리할 수 있지만.. 보안상 **모든 포트를 허용**하게 되므로 **적극 비추천** 하는 기능입니다.


### 참고

- DHCP 

  - <https://ko.wikipedia.org/wiki/%EB%8F%99%EC%A0%81_%ED%98%B8%EC%8A%A4%ED%8A%B8_%EA%B5%AC%EC%84%B1_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C>

- 맥어드레스

  - <http://www.ktword.co.kr/abbr_view.php?nav=&m_temp1=2294&id=708>
